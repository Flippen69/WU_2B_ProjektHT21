"use strict";(globalThis.webpackChunkunsplash_web=globalThis.webpackChunkunsplash_web||[]).push([[6673],{66827:(e,t,n)=>{n.d(t,{L:()=>l});var o=n(67294),i=n(12164);const l=o.createContext(i.YP)},56673:(e,t,n)=>{n.d(t,{q:()=>B,Z:()=>H});var o=n(3735),i=n(721),l=n(67294),r=n(37703),s=n(13904),a=n(12103),c=n(12864),d=n(65702),h=n(61093),p=n(91694),u=n(94597),I=n(6464),f=n(81619),m=n(14426),g=n(12164),E=n(66510),S=n(34132),O=n(59983),b=n(90559),v=n(58856),R=n(219),P=n(51588),q=n(66827);const N="gDCZZ",C="HxaG2",A="ATnvl",Z="dycl5 hNER6 jJsTo qBwND",k="PwSsU O84oE",w="rx4AP";function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const B=()=>l.createElement("div",{className:C},l.createElement("div",{className:A},u.w6H(0,17).map((e=>l.createElement("div",{key:e,className:Z},l.createElement("div",{className:k})))))),F=(0,E.DO)()({shouldRequireInfiniteScrollOptIn:!1,getNoContentEl:f.H((()=>l.createElement(v.Z,{type:"photos"}))),getPlaceholderEl:f.H((()=>l.createElement(B,null)))}),x=(0,s.unionize)({OptInRequired:(0,s.ofType)(),Enabled:{}});class D extends l.Component{constructor(...e){super(...e),y(this,"getInfiniteScrollSetting",(({shouldRequireInfiniteScrollOptIn:e})=>e?x.OptInRequired({optedIn:!1}):x.Enabled())),y(this,"state",{infiniteScrollSetting:this.getInfiniteScrollSetting(this.props)}),y(this,"toggleInfiniteScrollOptIn",(()=>{const{infiniteScrollSetting:e}=this.state;x.match({OptInRequired:({optedIn:e})=>{const t=x.OptInRequired({optedIn:(0,I.U_)(e)});this.setState({infiniteScrollSetting:t})},default:o.Q1})(e)})),y(this,"fetchDataAndBuildActions",(0,i.Z)((e=>(0,o.ls)(e,m.UI((0,o.ls)(p.Yq,c.E0,(({entities:e,result:t})=>[(0,a.VA)(e),a.aU.mk.HandleNextPhotoFeedPageResponse({feedId:this.props.feedId,photoIds:t})]))))))),y(this,"createPhotoFeedIdContextValue",(0,i.Z)((e=>g.G(e))))}UNSAFE_componentWillReceiveProps(e){if(e.shouldRequireInfiniteScrollOptIn!==this.props.shouldRequireInfiniteScrollOptIn){const t=this.getInfiniteScrollSetting(e);this.setState({infiniteScrollSetting:t})}}render(){const{photoFeedOption:e,photosOption:t,children:n,getNoContentEl:o,getPlaceholderEl:i,renderBeneathLoadMoreButton:r,feedId:s,fetchPhotos:a,notifier$:c,intersectionObserverRoot:d,intersectionObserverRootMarginBottom:h}=this.props,{infiniteScrollSetting:p}=this.state,u=!1===x.match({OptInRequired:({optedIn:e})=>e,Enabled:()=>!0})(p);return l.createElement(q.L.Provider,{value:this.createPhotoFeedIdContextValue(s)},l.createElement(R.f,{key:s,renderItems:n,feedItemsOption:t,feedStateOption:e,getScrollFooterEl:()=>l.createElement("div",{className:w},x.match({OptInRequired:({optedIn:e})=>e?l.createElement(P.Z,null):l.createElement(l.Fragment,null,l.createElement("div",{className:N},l.createElement(b.Z,{tag:"button",buttonType:O.L$.Outline,onClick:this.toggleInfiniteScrollOptIn,type:"button"},"Load more photos")),null==r?void 0:r()),Enabled:()=>l.createElement(P.Z,null)})(p)),getNoContentEl:o,getPlaceholderEl:i,shouldDisableInfiniteScroll:u,fetchDataAndBuildActions:this.fetchDataAndBuildActions(a),notifier$:c,intersectionObserverRoot:d,intersectionObserverRootMarginBottom:h}))}}const T=(0,d.O)()((()=>{const e=(0,S.XT)(),t=(0,S.u0)();return(n,o)=>({photoFeedOption:e(n,o.feedId),photosOption:t(n,o.feedId)})})),H=(0,o.zG)(D,(0,r.$j)(T),(e=>(0,h.b9)(e,F)))}}]);
//# sourceMappingURL=6673.c20282cf015f1920e156.js.map